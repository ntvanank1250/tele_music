services:
  telegram-bot:
    build: .
    container_name: tele_music_bot
    restart: unless-stopped
    volumes:
      # Mount tất cả file Python để auto-reload khi sửa
      - ./main.py:/app/main.py
      - ./constants.py:/app/constants.py
      - ./helpers.py:/app/helpers.py
      - ./search_engine.py:/app/search_engine.py
      - ./downloader.py:/app/downloader.py
      - ./system_info.py:/app/system_info.py
      - ./facebook_uploader.py:/app/facebook_uploader.py
      - ./.env:/app/.env
      # Mount host system info để /sys command hiển thị server info thực
      - /proc:/proc:ro
      - /sys:/sys:ro
      # Docker socket để đọc thông tin containers từ host
      - /var/run/docker.sock:/var/run/docker.sock
      # Supervisor socket từ host (đường dẫn mặc định)
      - /var/run/supervisor.sock:/var/run/supervisor.sock
    environment:
      - PYTHONUNBUFFERED=1
      - SUPERVISOR_SOCKET=/var/run/supervisor.sock
    env_file:
      - .env
